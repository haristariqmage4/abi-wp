jQuery(function(f){if("undefined"==typeof wc_checkout_params)return!1;window.can_update_checkout=!0;function n(){var t={},c=!1,e=0;for("[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(c=arguments[0],e++);e<arguments.length;e++)!function(e){for(var o in e)e.hasOwnProperty(o)&&(c&&"[object Object]"===Object.prototype.toString.call(e[o])?t[o]=n(t[o],e[o]):t[o]=e[o])}(arguments[e]);return t}var g=!(f.blockUI.defaults.overlayCSS.cursor="default"),k={checkoutPlaceOrderSelector:"#place_order, .fc-place-order-button",checkoutTermsSelector:".fc-terms-checkbox",checkoutUpdateFieldsSelector:".woocommerce-shipping-fields__field-wrapper .address-field input.input-text, .update_totals_on_change input.input-text",checkoutUpdateBeforeUnload:"yes"},v={updateTimer:!1,dirtyInput:!1,selectedPaymentMethod:!1,xhr:!1,$order_review:f("#order_review"),$checkout_form:f("form.checkout"),init:function(){k=n(!0,k,window.fcSettings),f(document.body).on("update_checkout",this.update_checkout),f(document.body).on("init_checkout",this.init_checkout),this.$checkout_form.on("click",'input[name="payment_method"]',this.payment_method_selected),f(document.body).hasClass("woocommerce-order-pay")&&(this.$order_review.on("click",'input[name="payment_method"]',this.payment_method_selected),this.$order_review.on("submit",this.submitOrder),this.$order_review.attr("novalidate","novalidate")),this.$checkout_form.attr("novalidate","novalidate"),this.$checkout_form.on("submit",this.submit),this.$checkout_form.on("input validate change",".input-text, select, input:checkbox",this.validate_field),this.$checkout_form.on("update",this.trigger_update_checkout),this.$checkout_form.on("change",'select.shipping_method, input[name^="shipping_method"], .update_totals_on_change select, .update_totals_on_change input[type="radio"], .update_totals_on_change input[type="checkbox"]',this.trigger_update_checkout),this.$checkout_form.on("change",".address-field select",this.input_changed),this.$checkout_form.on("change",k.checkoutUpdateFieldsSelector,this.maybe_input_changed),this.$checkout_form.on("keydown",k.checkoutUpdateFieldsSelector,this.queue_update_checkout),document.addEventListener("visibilitychange",this.maybe_update_checkout_visibility_change),"yes"===k.checkoutUpdateBeforeUnload&&this.$checkout_form.on("change, input","select, input, textarea",this.maybe_prevent_unload),this.$checkout_form.on("change","#billing_same_as_shipping",this.billing_same_shipping_changed),f(document.body).on("updated_checkout",this.maybe_reinitialize_collapsible_blocks),this.$checkout_form.on("change",k.checkoutTermsSelector,this.terms_checked_changed),this.init_payment_methods(),"1"===wc_checkout_params.is_checkout&&f(document.body).trigger("init_checkout"),"yes"===wc_checkout_params.option_guest_checkout&&f("input#createaccount").on("change",this.toggle_create_account).trigger("change")},billing_same_shipping_changed:function(e){var o,t;window.CollapsibleBlock&&(o=document.querySelector("#billing_same_as_shipping"),t=document.querySelector("#woocommerce-billing-fields__field-wrapper"),o.checked?CollapsibleBlock.collapse(t):CollapsibleBlock.expand(t)),f(document.body).trigger("update_checkout")},maybe_reinitialize_collapsible_blocks:function(){if(window.CollapsibleBlock)for(var e=document.querySelectorAll("[data-collapsible]"),o=0;o<e.length;o++){var t=e[o];CollapsibleBlock.getInstance(t)||CollapsibleBlock.initializeElement(t)}},maybe_update_checkout_visibility_change:function(){"hidden"!=document.visibilityState&&"visible"!=document.visibilityState||f(document.body).trigger("update_checkout")},maybe_prevent_unload:function(e){var o;e&&e.target.closest(".payment_box, input#createaccount")||g||(o=function(e){g&&(e.preventDefault(),e.returnValue="",f(document.body).trigger("update_checkout"),g=!1,window.removeEventListener("beforeunload",o))},window.addEventListener("beforeunload",o),g=!0)},init_payment_methods:function(){var e=f(".woocommerce-checkout").find('input[name="payment_method"]');1===e.length&&e.eq(0).hide(),v.selectedPaymentMethod&&f("#"+v.selectedPaymentMethod).prop("checked",!0),0===e.filter(":checked").length&&e.eq(0).prop("checked",!0);var o=e.filter(":checked").eq(0).prop("id");1<e.length&&f('div.payment_box:not(".'+o+'")').filter(":visible").slideUp(0),e.filter(":checked").eq(0).trigger("click")},get_payment_method:function(){return v.$checkout_form.find('input[name="payment_method"]:checked').val()},payment_method_selected:function(e){e.stopPropagation(),1<f(".payment_methods input.input-radio").length?(o=f("div.payment_box."+f(this).attr("ID")),(e=f(this).is(":checked"))&&!o.is(":visible")&&(f("div.payment_box").filter(":visible").slideUp(230),e&&o.slideDown(230))):f("div.payment_box").show(),f(this).data("order_button_text")?f(k.checkoutPlaceOrderSelector).text(f(this).data("order_button_text")):f(k.checkoutPlaceOrderSelector).text(f(k.checkoutPlaceOrderSelector).data("value"));var o=f('.woocommerce-checkout input[name="payment_method"]:checked').attr("id");o!==v.selectedPaymentMethod&&f(document.body).trigger("payment_method_selected"),document.body.classList.remove("has-payment-method-selected--"+v.selectedPaymentMethod),document.body.classList.add("has-payment-method-selected--"+o),v.selectedPaymentMethod=o},toggle_create_account:function(){f("div.create-account").hide(),f(this).is(":checked")&&(f("#account_password").val("").trigger("change"),f("div.create-account").slideDown())},init_checkout:function(){f(document.body).trigger("update_checkout")},maybe_input_changed:function(e){v.dirtyInput&&v.input_changed(e)},terms_checked_changed:function(e){e=f(e.target).prop("checked");f(k.checkoutTermsSelector).prop("checked",e)},input_changed:function(e){v.dirtyInput=e.target,v.maybe_update_checkout()},queue_update_checkout:function(e){e=e.keyCode||e.which||0;if(9===e||16===e||17===e||18===e||91===e||92===e||37===e||38===e||39===e||40===e)return!0;v.dirtyInput=this,v.reset_update_checkout_timer(),v.updateTimer=setTimeout(v.maybe_update_checkout,"1000")},trigger_update_checkout:function(){v.reset_update_checkout_timer(),v.dirtyInput=!1,f(document.body).trigger("update_checkout")},maybe_update_checkout:function(){var e,o=!0;!f(v.dirtyInput).length||(e=f(v.dirtyInput).closest("div").find(".address-field.validate-required")).length&&e.each(function(){""===f(this).find("input.input-text").val()&&(o=!1)}),o&&v.trigger_update_checkout()},reset_update_checkout_timer:function(){clearTimeout(v.updateTimer)},is_valid_json:function(e){try{var o=JSON.parse(e);return o&&"object"==typeof o}catch(e){return!1}},validate_field:function(e){var o=f(this),t=o.closest(".form-row"),c=!0,n=t.is(".validate-required"),i=t.is(".validate-email"),r=t.is(".validate-phone"),a="",e=e.type;"input"===e&&t.removeClass("woocommerce-invalid woocommerce-invalid-required-field woocommerce-invalid-email woocommerce-invalid-phone woocommerce-validated"),"validate"!==e&&"change"!==e||(n&&("checkbox"===o.attr("type")&&!o.is(":checked")||""===o.val())&&(t.removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-required-field"),c=!1),i&&o.val()&&((a=new RegExp(/^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i)).test(o.val())||(t.removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-email woocommerce-invalid-phone"),c=!1)),r&&(a=new RegExp(/[\s\#0-9_\-\+\/\(\)\.]/g),0<o.val().replace(a,"").length&&(t.removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-phone"),c=!1)),c&&t.removeClass("woocommerce-invalid woocommerce-invalid-required-field woocommerce-invalid-email woocommerce-invalid-phone").addClass("woocommerce-validated"))},update_checkout:function(e,o){v.reset_update_checkout_timer(),v.updateTimer=setTimeout(v.update_checkout_action,"5",o)},maybe_refocus_element:function(t,c){null!==t&&requestAnimationFrame(function(){var e,o;t.id?e=document.getElementById(t.id):t.getAttribute("name")?(o=t.getAttribute("name"),e=document.querySelector('[name="'+o+'"]')):!t.closest(".form-row")||(o=t.closest(".form-row")).id&&(e=document.querySelector('.form-row[id="'+o.id+'"] .select2-selection')),e&&(e.focus(),null!==c&&c!==e.value&&(e.value=c),setTimeout(function(){t.selectionStart&&t.selectionEnd?(e.selectionStart=t.selectionStart,e.selectionEnd=t.selectionEnd):e.selectionStart&&e.selectionEnd&&(e.selectionStart=e.selectionEnd=Number.MAX_SAFE_INTEGER||1e4)},0))})},update_checkout_action:function(e){var o,t,c,n,i,r,a,u,d,s,l,m,p,_,h;window.can_update_checkout&&(v.xhr&&v.xhr.abort(),0!==f("form.checkout").length&&(e=void 0!==e?e:{update_shipping_method:!0},o=f("#billing_country").val(),t=f("#billing_state").val(),c=f(":input#billing_postcode").val(),n=f("#billing_city").val(),i=f(":input#billing_address_1").val(),r=f(":input#billing_address_2").val(),a=f("#shipping_country").val(),u=f("#shipping_state").val(),d=f(":input#shipping_postcode").val(),s=f("#shipping_city").val(),l=f(":input#shipping_address_1").val(),_=f(":input#shipping_address_2").val(),m=f(v.$checkout_form).find(".address-field.validate-required:visible"),p=!0,m.length&&m.each(function(){""===f(this).find(":input").val()&&(p=!1)}),!(_={security:wc_checkout_params.update_order_review_nonce,payment_method:v.get_payment_method(),country:o,state:t,postcode:c,city:n,address:i,address_2:r,s_country:a,s_state:u,s_postcode:d,s_city:s,s_address:l,s_address_2:_,has_full_address:p,post_data:f("form.checkout").serialize()})!==e.update_shipping_method&&(h={},f('select.shipping_method, input[name^="shipping_method"][type="radio"]:checked, input[name^="shipping_method"][type="hidden"]').each(function(){h[f(this).data("index")]=f(this).val()}),_.shipping_method=h),f(".woocommerce-checkout-payment, .woocommerce-checkout-review-order-table .fc-shipping-method__packages").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),v.xhr=f.ajax({type:"POST",url:wc_checkout_params.wc_ajax_url.toString().replace("%%endpoint%%","update_order_review"),data:_,success:function(e){var o,t,c,n;e&&!0===e.reload?window.location.reload():(f(".woocommerce-NoticeGroup-updateOrderReview").remove(),n=f(k.checkoutTermsSelector).prop("checked"),o={},f(".payment_box :input").each(function(){var e=f(this).attr("id");e&&(-1!==f.inArray(f(this).attr("type"),["checkbox","radio"])?o[e]=f(this).prop("checked"):o[e]=f(this).val())}),t=document.activeElement,c=document.activeElement.value,e&&e.fragments&&(f.each(e.fragments,function(e,o){v.fragments&&v.fragments[e]===o||f(e).replaceWith(o),f(e).unblock()}),v.fragments=e.fragments),v.maybe_refocus_element(t,c),n&&f(k.checkoutTermsSelector).prop("checked",!0),f.isEmptyObject(o)||f(".payment_box :input").each(function(){var e=f(this).attr("id");e&&(-1!==f.inArray(f(this).attr("type"),["checkbox","radio"])?f(this).prop("checked",o[e]).trigger("change"):(-1!==f.inArray(f(this).attr("type"),["select"])||null!==f(this).val()&&0===f(this).val().length)&&f(this).val(o[e]).trigger("change"))}),e&&"failure"===e.result&&(n=f("form.checkout"),f(".woocommerce-error, .woocommerce-message").remove(),e.messages?n.prepend('<div class="woocommerce-NoticeGroup woocommerce-NoticeGroup-updateOrderReview">'+e.messages+"</div>"):n.prepend(e),n.find(".input-text, select, input:checkbox").trigger("validate").trigger("blur"),v.scroll_to_notices()),v.init_payment_methods(),g=!1,f(document.body).trigger("updated_checkout",[e]))}})))},handleUnloadEvent:function(e){if(-1===navigator.userAgent.indexOf("MSIE")&&!document.documentMode)return!0;e.preventDefault()},attachUnloadEventsOnSubmit:function(){f(window).on("beforeunload",this.handleUnloadEvent)},detachUnloadEventsOnSubmit:function(){f(window).off("beforeunload",this.handleUnloadEvent)},blockOnSubmit:function(e){1!==e.data("blockUI.isBlocked")&&e.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},submitOrder:function(){v.blockOnSubmit(f(this))},submit:function(){v.reset_update_checkout_timer();var t,e=f(this);return e.is(".processing")||(g=!1)!==e.triggerHandler("checkout_place_order")&&!1!==e.triggerHandler("checkout_place_order_"+v.get_payment_method())&&(e.addClass("processing"),t=document.activeElement,f(k.checkoutPlaceOrderSelector).attr("disabled","disabled"),f(k.checkoutPlaceOrderSelector).addClass("disabled"),v.blockOnSubmit(e),v.attachUnloadEventsOnSubmit(),f.ajaxSetup({dataFilter:function(e,o){if("json"!==o)return e;if(v.is_valid_json(e))return e;o=e.match(/{"result.*}/);return null!==o&&v.is_valid_json(o[0])?(console.log("Fixed malformed JSON. Original:"),console.log(e),e=o[0]):console.log("Unable to fix malformed JSON"),e}}),f.ajax({type:"POST",url:wc_checkout_params.checkout_url,data:e.serialize(),dataType:"json",success:function(o){v.detachUnloadEventsOnSubmit();try{if("success"!==o.result||!1===e.triggerHandler("checkout_place_order_success",o))throw"failure"===o.result?"Result failure":"Invalid response";-1===o.redirect.indexOf("https://")||-1===o.redirect.indexOf("http://")?window.location=o.redirect:window.location=decodeURI(o.redirect)}catch(e){if(!0===o.reload)return void window.location.reload();f(k.checkoutPlaceOrderSelector).removeAttr("disabled"),f(k.checkoutPlaceOrderSelector).removeClass("disabled"),v.maybe_refocus_element(t),!0===o.refresh&&f(document.body).trigger("update_checkout"),o.messages?v.submit_error(o.messages):v.submit_error('<div class="woocommerce-error">'+wc_checkout_params.i18n_checkout_error+"</div>")}},error:function(e,o,t){v.detachUnloadEventsOnSubmit(),v.submit_error('<div class="woocommerce-error">'+t+"</div>")}})),!1},submit_error:function(e){f(".woocommerce-NoticeGroup-checkout, .woocommerce-error, .woocommerce-message").remove(),v.$checkout_form.prepend('<div class="woocommerce-NoticeGroup woocommerce-NoticeGroup-checkout">'+e+"</div>"),v.$checkout_form.removeClass("processing").unblock(),f(k.checkoutPlaceOrderSelector).removeAttr("disabled"),f(k.checkoutPlaceOrderSelector).removeClass("disabled"),v.$checkout_form.find(".input-text, select, input:checkbox").trigger("validate").trigger("blur"),v.scroll_to_notices(),f(document.body).trigger("checkout_error",[e])},scroll_to_notices:function(){var e=f(".woocommerce-NoticeGroup-updateOrderReview, .woocommerce-NoticeGroup-checkout");e.length||(e=f("form.checkout")),f.scroll_to_notices(e)}},t={init:function(){f(document.body).on("click","a.showcoupon",this.show_coupon_form),f(document.body).on("click",".woocommerce-remove-coupon",this.remove_coupon),f("form.checkout_coupon").hide().on("submit",this.submit),f(document.body).on("click","[data-apply-coupon-button]",this.apply_coupon),v.$checkout_form.on("keydown",'input[name="coupon_code"]',this.maybe_apply_coupon_keydown)},show_coupon_form:function(){return f(".checkout_coupon").slideToggle(400,function(){f(".checkout_coupon").find(":input:eq(0)").trigger("focus")}),!1},submit:function(){var o=f(this);if(o.is(".processing"))return!1;o.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var t={security:wc_checkout_params.apply_coupon_nonce,coupon_code:o.find('input[name="coupon_code"]').val()};return f.ajax({type:"POST",url:wc_checkout_params.wc_ajax_url.toString().replace("%%endpoint%%","apply_coupon"),data:t,success:function(e){f(".woocommerce-error, .woocommerce-message").remove(),o.removeClass("processing").unblock(),e&&(o.before(e),o.slideUp(),f(document.body).trigger("applied_coupon_in_checkout",[t.coupon_code]),f(document.body).trigger("update_checkout",{update_shipping_method:!1}))},dataType:"html"}),!1},remove_coupon:function(e){e.preventDefault();var c=0<f(this).parents(".fc-coupon-codes__coupon").length,n=c?f(this).parents(".fc-coupon-codes__coupon"):f(this).parents(".woocommerce-checkout-review-order"),e=f(this).data("coupon");n.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var i={security:wc_checkout_params.remove_coupon_nonce,coupon:e};c&&f(".woocommerce-error, .woocommerce-message").remove(),f.ajax({type:"POST",url:wc_checkout_params.wc_ajax_url.toString().replace("%%endpoint%%","remove_coupon"),data:i,success:function(e){var o,t;c||(f(".woocommerce-error, .woocommerce-message").remove(),n.removeClass("processing").unblock()),e&&(o=f('.fc-step__substep[data-substep-id="coupon_codes"] .fc-step__substep-title'),t=f('.fc-step__substep[data-substep-id="coupon_codes"]'),c&&o.length?f(e).insertAfter(o):c&&0<t.length?t.prepend(e):f("form.woocommerce-checkout").before(e),f(document.body).trigger("removed_coupon_in_checkout",[i.coupon_code]),f(document.body).trigger("update_checkout",{update_shipping_method:!1}),f("form.checkout_coupon").find('input[name="coupon_code"]').val(""),f("form.woocommerce-checkout").find('input[name="coupon_code"]').val(""))},error:function(e){wc_checkout_params.debug_mode&&console.log(e.responseText)},dataType:"html"})},apply_coupon:function(e){e.preventDefault();var e=f("form.woocommerce-checkout").find('input[name="coupon_code"]').val(),c=f("form.woocommerce-checkout").find('input[name="coupon_code"]'),n=f("form.woocommerce-checkout").find("[data-apply-coupon-button]"),i={security:wc_checkout_params.apply_coupon_nonce,coupon_code:e},r=f(this).parents(".fc-expansible-form-section__content--coupon_code");r.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),c.prop("disabled",!0),n.prop("disabled",!0),f.ajax({type:"POST",url:wc_checkout_params.wc_ajax_url.toString().replace("%%endpoint%%","apply_coupon"),data:i,success:function(e){var o,t;f(".woocommerce-error, .woocommerce-message").remove(),r.removeClass("processing").unblock(),c.prop("disabled",!1),n.prop("disabled",!1),e&&(o=f('.fc-step__substep[data-substep-id="coupon_codes"] .fc-step__substep-title'),t=f('.fc-step__substep[data-substep-id="coupon_codes"]'),0<o.length?f(e).insertAfter(o):t.prepend(e),f(document.body).trigger("applied_coupon_in_checkout",[i.coupon_code]),f(document.body).trigger("update_checkout",{update_shipping_method:!1}),f("form.checkout_coupon").find('input[name="coupon_code"]').val(""),f("form.woocommerce-checkout").find('input[name="coupon_code"]').val(""),window.CollapsibleBlock&&(o=document.querySelector("form.woocommerce-checkout .fc-expansible-form-section__toggle--coupon_code"),t=document.querySelector("form.woocommerce-checkout .fc-expansible-form-section__content--coupon_code"),e=document.querySelector("form.woocommerce-checkout .expansible-section__toggle-plus--coupon_code"),o&&t&&(CollapsibleBlock.collapse(t),CollapsibleBlock.expand(o),e&&e.focus())))},error:function(e){wc_checkout_params.debug_mode&&console.log(e.responseText)},dataType:"html"})},maybe_apply_coupon_keydown:function(e){var o=e.keyCode||e.which||0;f(e.target).is('form.woocommerce-checkout input[name="coupon_code"]')&&13===o&&(e.preventDefault(),t.apply_coupon(e))}},e={init:function(){f(document.body).on("click","a.showlogin",this.show_login_form)},show_login_form:function(){return f("form.login, form.woocommerce-form--login").slideToggle(),!1}},o={init:function(){f(document.body).on("click","a.woocommerce-terms-and-conditions-link",this.toggle_terms)},toggle_terms:function(){if(f(".woocommerce-terms-and-conditions").length)return f(".woocommerce-terms-and-conditions").slideToggle(function(){var e=f(".woocommerce-terms-and-conditions-link");f(".woocommerce-terms-and-conditions").is(":visible")?(e.addClass("woocommerce-terms-and-conditions-link--open"),e.removeClass("woocommerce-terms-and-conditions-link--closed")):(e.removeClass("woocommerce-terms-and-conditions-link--open"),e.addClass("woocommerce-terms-and-conditions-link--closed"))}),!1}};v.init(),t.init(),e.init(),o.init()});
//# sourceMappingURL=maps/checkout-153.min.js.map
