/*! WooCommerce Name Your Price 3.3.8 2022-02-01 19:02 */
function woocommerce_nyp_format_price(t,i,e){void 0===i&&(i="");e=(e=void 0===e?!1:e)?woocommerce_nyp_params.currency_format:"%v",t=accounting.formatMoney(t,{symbol:i,decimal:woocommerce_nyp_params.currency_format_decimal_sep,thousand:woocommerce_nyp_params.currency_format_thousand_sep,precision:woocommerce_nyp_params.currency_format_num_decimals,format:e}).trim();return woocommerce_nyp_params.trim_zeros&&(i=new RegExp("\\"+woocommerce_nyp_params.currency_format_decimal_sep+"0+$","i"),t=t.replace(i,"")),t}function woocommerce_nyp_unformat_price(t){return Math.abs(parseFloat(accounting.unformat(t,woocommerce_nyp_params.currency_format_decimal_sep)))}jQuery.fn.wc_nyp_get_script_object=function(){var t=jQuery(this);return void 0!==t.data("wc_nyp_script_obj")&&t.data("wc_nyp_script_obj")},function(o){var e=function(t){var i=t.wc_nyp_get_script_object();if("object"==typeof i)return i;this.$el=t,this.$add_to_cart=t.find(".single_add_to_cart_button"),this.$add_to_cart.length||(this.$add_to_cart=t.find(":submit")),this.$addons_totals=this.$el.find("#product-addons-total"),this.show_addons_totals=!1,this.nypProducts=[],this.update_nyp_timer=!1,this.$el.trigger("wc-nyp-initializing",[this]),this.updateForm=this.updateForm.bind(this),this.$add_to_cart.on("click",{nypForm:this},this.onSubmit),this.$el.on("wc-nyp-initialized",{nypForm:this},this.updateForm),this.$el.on("wc-nyp-updated",{nypForm:this},this.updateForm),this.initIntegrations(),this.$el.data("wc_nyp_script_obj",this),this.$el.trigger("wc-nyp-initialized",[this])},a=(e.prototype.getProducts=function(){var r=this;return this.$el.find(".nyp").each(function(t){var i=o(this),e=i.wc_nyp_get_script_object();"object"!=typeof e&&(e=new a(i)),r.nypProducts[t]=e}),r.nypProducts},e.prototype.initIntegrations=function(){this.$el.hasClass("variations_form")&&new t(this),this.$el.hasClass("grouped_form")&&new i(this),o("#woo_pp_ec_button_product").length&&new r(this)},e.prototype.updateForm=function(t,i){var e=this.getProducts();void 0!==(i=void 0===i&&void 0!==e&&e.length?e.shift():i)&&"undefined"!=typeof i.$price_input&&(e=i.$price_input.attr("name"),i=i.user_price,this.$add_to_cart.data(e,i),this.$addons_totals.data("price",i),this.$el.trigger("woocommerce-product-addons-update")),this.isValid()?(this.$add_to_cart.removeClass("nyp-disabled"),this.$el.trigger("wc-nyp-valid",[this])):(this.$add_to_cart.addClass("nyp-disabled"),this.$el.trigger("wc-nyp-invalid",[this]))},e.prototype.updateFormTask=function(t){this.updateForm(!1,t)},e.prototype.onSubmit=function(t){if(!t.data.nypForm.isValid("submit"))return t.preventDefault(),t.stopImmediatePropagation(),!1},e.prototype.isValid=function(i){var e=!0;return this.getProducts().forEach(function(t){if("submit"===i&&t.$el.trigger("wc-nyp-update"),!t.isValid())return!(e=!1)}),e},e.prototype.shutdown=function(){this.$el.find("*").off()},function(t){var i=t.wc_nyp_get_script_object();if(i)return i;i=this;i.$el=t,i.$cart=t.closest(".cart"),i.$form=t.closest(".cart").not(".product, [data-bundled_item_id]"),i.$error=t.find(".woocommerce-nyp-message"),i.$error_content=i.$error.find("ul.woocommerce-error"),i.$label=t.find("label"),i.$screen_reader=t.find(".screen-reader-text"),i.$price_input=t.find(".nyp-input"),i.$period_input=t.find(".nyp-period"),i.$minimum=t.find(".minimum-price"),i.$subscription_terms=t.find(".subscription-details"),i.form=i.$form.wc_nyp_get_script_object(),i.min_price=parseFloat(t.data("min-price")),i.max_price=parseFloat(t.data("max-price")),i.annual_minimum=parseFloat(t.data("annual-minimum")),i.raw_price=i.$price_input.val(),i.user_price=woocommerce_nyp_unformat_price(i.raw_price),i.user_period=i.$period_input.val(),i.error_messages=[],i.optional=!1,i.initialized=!1,i.onUpdate=i.onUpdate.bind(i),i.validate=i.validate.bind(i),this.$el.on("change",".nyp-input, .nyp-period",{nypProduct:this},this.onChange),this.$el.on("keypress",".nyp-input, .nyp-period",{nypProduct:this},this.onKeypress),this.$el.on("woocommerce-nyp-update",{nypProduct:this},this.onUpdate),this.$el.on("wc-nyp-update",{nypProduct:this},this.onUpdate),i.$el.data("wc_nyp_script_obj",i),i.$el.trigger("wc-nyp-update",[i])});function t(r){var t,o=this,n=r.getProducts().shift();void 0!==n&&(t=r.$add_to_cart.html(),this.integrate=function(){r.$el.on("found_variation",o.onFoundVariation),r.$el.on("reset_image",o.resetVariations),r.$el.on("click",".reset_variations",o.resetVariations)},this.onFoundVariation=function(t,i){var e;n.$error.slideUp(),"undefined"!=typeof i.is_nyp&&!0===i.is_nyp?(r.$add_to_cart.html(i.add_to_cart_text),e="undefined"!=typeof i.display_price&&i.display_price?i.display_price:"",n.min_price="undefined"!=typeof i.minimum_price&&i.minimum_price?parseFloat(i.minimum_price):"",n.max_price="undefined"!=typeof i.maximum_price&&i.maximum_price?parseFloat(i.maximum_price):"",""!==e.trim()?n.$price_input.val(woocommerce_nyp_format_price(e)):n.$price_input.val(""),n.$label.length&&((e="undefined"!==i.price_label?i.price_label:"")?n.$label.html(e).show():n.$label.empty().hide()),n.$minimum.length&&((e="undefined"!==i.minimum_price_html?i.minimum_price_html:"")?n.$minimum.html(e).show():n.$minimum.empty().hide()),n.$el.slideDown(),n.$el.data("hide-minimum",i.hide_minimum),n.initialized=!1,n.$el.trigger("wc-nyp-update")):o.resetVariations()},this.resetVariations=function(){r.$add_to_cart.html(t).removeClass("nyp-disabled"),n.$el.slideUp().removeClass("nyp-error"),n.initialized=!1,n.$error_content.empty(),n.$price_input.val("")},this.integrate())}function i(t){var i=this;this.integrate=function(){t.$el.on("change",".qty, .wc-grouped-product-add-to-cart-checkbox",i.onStatusChange),t.$el.find(".qty, .wc-grouped-product-add-to-cart-checkbox").change()},this.onStatusChange=function(){var t=o(this).closest("tr").find(".nyp");t.length&&((o(this).is(":checkbox")?o(this).is(":checked"):0<o(this).val())?t.data("optional_status",!0):t.data("optional_status",!1),t.trigger("wc-nyp-update",[{force:!0}]))},this.integrate()}function r(t){var i=this;this.integrate=function(){t.$el.on("wc-nyp-valid",i.enable),t.$el.on("wc-nyp-invalid",i.disable),o(document).on("wc_ppec_validate_product_form",i.validate)},this.enable=function(){o("#woo_pp_ec_button_product").trigger("enable")},this.disable=function(){o("#woo_pp_ec_button_product").trigger("disable")},this.validate=function(t,i,e){e=e.wc_nyp_get_script_object();return i="object"==typeof e?e.isValid():i},this.integrate()}a.prototype.onChange=function(t){t.data.nypProduct.$el.trigger("wc-nyp-update",[t.data.nypProduct])},a.prototype.onKeypress=function(t){"Enter"===t.key&&(t.preventDefault(),t.data.nypProduct.$el.trigger("wc-nyp-update",[t.data.nypProduct]))},a.prototype.onUpdate=function(t,i){var e,r=this;void 0!==i&&i.hasOwnProperty("force")&&!0===i.force&&(this.initialized=!1),this.raw_price=this.$price_input.val().trim()?this.$price_input.val().trim():"",this.user_price=woocommerce_nyp_unformat_price(this.raw_price),this.user_period=this.$period_input.val(),""!==this.raw_price&&this.$price_input.val(woocommerce_nyp_format_price(this.user_price)),this.validate(),this.$el.data("price",this.user_price),this.$el.data("period",this.user_period),this.isValid()?(this.$el.removeClass("nyp-error"),this.$error.slideUp(),this.$el.trigger("wc-nyp-valid-item",[this])):(e=o("<ul/>"),0<(i=this.getErrorMessages()).length&&o.each(i,function(t,i){e.append(o("<li/>").html(i))}),this.$error_content.html(e.html()),this.$el.trigger("wc-nyp-invalid-item",[this])),this.isInitialized()&&!this.isValid()&&(this.$el.addClass("nyp-error"),this.$error.slideDown(function(){r.$price_input.trigger("focus").trigger("select")})),this.$cart.trigger("woocommerce-nyp-updated-item"),o("body").trigger("woocommerce-nyp-updated"),this.$el.trigger("wc-nyp-updated",[this]),this.initialized=!0},a.prototype.validate=function(){if(!this.priceChanged())return!0;if(this.resetMessages(),this.$el.data("nyp-valid",!0),this.isOptional())return!0;var t,i,e=this.$el.data("hide-minimum")?this.$el.data("hide-minimum-error"):this.$el.data("minimum-error"),r="%%MINIMUM%%",o="";0<this.annual_minimum?this.user_price*woocommerce_nyp_params.annual_price_factors[this.user_period]<this.annual_minimum&&(t=this.annual_minimum/woocommerce_nyp_params.annual_price_factors[this.user_period],i=this.$period_input.find('option[value="'+this.user_period+'"]').text(),o=woocommerce_nyp_params.i18n_subscription_string.replace("%price",woocommerce_nyp_format_price(t,woocommerce_nyp_params.currency_format_symbol,!0)).replace("%period",i),this.addErrorMessage(e.replace(r,o))):this.min_price&&this.user_price<this.min_price?(o=woocommerce_nyp_format_price(this.min_price,woocommerce_nyp_params.currency_format_symbol,!0),this.addErrorMessage(e.replace(r,o))):this.max_price&&this.user_price>this.max_price?(e=this.$el.data("maximum-error"),r="%%MAXIMUM%%",o=woocommerce_nyp_format_price(this.max_price,woocommerce_nyp_params.currency_format_symbol,!0),this.addErrorMessage(e.replace(r,o))):""===this.raw_price&&(e=this.$el.data("empty-error"),this.addErrorMessage(e.replace(r,o))),this.isValid()||this.$el.data("nyp-valid",!1)},a.prototype.priceChanged=function(){var t=!0;return t=!this.$el.is(":visible")||this.isInitialized()&&this.raw_price===this.user_price&&this.user_price===this.$el.data("price")&&this.user_period===this.$el.data("period")?!1:t},a.prototype.isValid=function(){return!this.$el.is(":visible")||this.isOptional()||!this.error_messages.length},a.prototype.isOptional=function(){return"yes"===this.$el.data("optional")&&!0!==this.$el.data("optional_status")},a.prototype.isInitialized=function(){return this.initialized},a.prototype.addErrorMessage=function(t){this.error_messages.push(t.toString())},a.prototype.getErrorMessages=function(){return this.error_messages},a.prototype.resetMessages=function(){this.error_messages=[]},a.prototype.resetMessages=function(){this.error_messages=[]},a.prototype.getPrice=function(){return this.user_price},a.prototype.getPeriod=function(){return this.user_period},jQuery(function(n){n.fn.wc_nyp_form=function(){var t=n(this),i=t.wc_nyp_get_script_object();return!!t.hasClass("cart")&&(i&&t.data("wc_nyp_script_obj").shutdown(),new e(t),this)},n("form.cart").each(function(){n(this).wc_nyp_form()}),new e(n("form.cart")),n("body").on("quick-view-displayed",function(){n("form.cart").each(function(){n(this).wc_nyp_form()})}),n(".wcopc .cart").each(function(){n(this).wc_nyp_form()}),n("body").on("opc_add_remove_product",function(t,i,e){var r,o;return void 0===e||(r=(e=n(e.currentTarget)).closest(".cart").find(".nyp").wc_nyp_get_script_object())&&(r.$el.trigger("wc-nyp-update"),0<(o=parseFloat(i.quantity))&&!r.isValid()?("number"===e.prop("type")&&e.val(e.data("cart_quantity")),i.invalid=!0):0===o&&(r.$el.removeClass("nyp-error"),r.$error.slideUp(),e=r.$el.data("initial-price"),""!==n.trim(e)?r.$price_input.val(woocommerce_nyp_format_price(e)):r.$price_input.val(""))),i}),n("body .component").on("wc-composite-component-loaded",function(){var t=n(this).find(".nyp");t.length?a(t):n(this).trigger("wc-nyp-updated")})})}(jQuery);